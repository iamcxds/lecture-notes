\chapter{Category}\label{chap:category} 

There are many references available for category theory; in this course, we follow \cite{nlab:geometry_of_physics_--_categories_and_toposes}
\section{Definition and Examples}
\begin{definition}[Category]
A \textbf{category} $\mathcal{C}$ consists of:
\begin{itemize}
  \item A class of objects $\mathrm{Ob}(\mathcal{C})$.
    \item For each pair $A, B$, a set of morphisms $\mathrm{Hom}_{\mathcal{C}}(A, B)$.
    \item A composition operation $\circ$ of morphisms and identity morphisms $\mathrm{id}_A$ for each object $A$.
\end{itemize}

Subject to:
\begin{itemize}
    \item \textbf{Associativity:} $h \circ (g \circ f) = (h \circ g) \circ f$
    \item \textbf{Identity:} $\mathrm{id}_B \circ f = f = f \circ \mathrm{id}_A$
\end{itemize}
 
\end{definition}

For simplicity, we denote objects in a category $\mathcal{C}$ by $A \in \mathcal{C}$ and morphisms by $f: A \to B$. There are various ways to understand what a category is; let us explore this through examples:

\begin{example}[Concrete Category]
A concrete category can be viewed as a collection of mathematical structures, where morphisms are maps that preserve those structures.
\begin{itemize}
  \item \textbf{Set:} Objects are sets\footnote{Since the collection of all sets does not itself form a set, we refer instead to a \emph{class} of objects. However, if we restrict our attention to \emph{small} sets, then the collection of objects can be treated as a set. In this course, we will ignore set-theoretic subtleties and proceed informally.}; morphisms are functions between sets.
    \item \textbf{Grp:} Objects are groups; morphisms are group homomorphisms.
    \item \textbf{Vect:} Objects are vector spaces; morphisms are linear maps.
    \item \textbf{Top:} Objects are topological spaces; morphisms are continuous maps.
\end{itemize}
You can construct infinitely many examples from the mathematical structures you are familiar with.
\end{example}

At first glance, this abstraction may seem unnecessary. However, we can generalize familiar notions from set theory. For instance, consider a morphism $f: A \to B$ in a category $\mathcal{C}$:

\begin{itemize}
    \item \textbf{Isomorphism:} $f$ is an \emph{isomorphism} if there exists a morphism $g: B \to A$ such that:
    \[
      g \circ f = \mathrm{id}_A \quad \text{and} \quad f \circ g = \mathrm{id}_B (\text{i.e.} g=f^{-1})
    \]
    In this case, $A$ and $B$ are said to be \emph{isomorphic}.

    \item \textbf{Monomorphism:} $f$ is a \emph{monomorphism} (or \emph{mono}) if for all morphisms $g_1, g_2: X \to A$, we have:
    \[
    f \circ g_1 = f \circ g_2 \Rightarrow g_1 = g_2
    \]
    That is, $f$ is left-cancellable.

    \item \textbf{Epimorphism:} $f$ is an \emph{epimorphism} (or \emph{epi}) if for all morphisms $h_1, h_2: B \to Y$, we have:
    \[
    h_1 \circ f = h_2 \circ f \Rightarrow h_1 = h_2
    \]
    That is, $f$ is right-cancellable.

\end{itemize}
\begin{exercise}
Verify that in the category $\Set$, these definitions correspond to bijections, injections, and surjections, respectively.
\end{exercise}

\begin{example}[Classifying Category]
  A category can be viewed as an algebraic structure generalizing a monoid\footnote{An algebraic structure similar to a group, but without requiring inverses}. Indeed, for any object $A \in \mathcal{C}$, the set of endomorphisms $\mathrm{Hom}_{\mathcal{C}}(A, A)$ forms a monoid. Conversely, any monoid $M$ can be associated with a \textbf{classifying category} $BM$, which has a single object $\bullet$ and morphisms $\mathrm{Hom}_{BM}(\bullet, \bullet) = M$. In particular, for any group $G$, we obtain a \textbf{classifying space} $BG$, where all morphisms are isomorphisms.
\end{example}

We refer to $BG$ as a space because we can interpret its isomorphisms as paths in a certain topological space:

\begin{example}[Groupoid]
A \textbf{groupoid} is a category in which every morphism is an isomorphism. Given a groupoid $\mathcal{X}$, we can construct its \textbf{geometric realization} $|\mathcal{X}|$ as follows:
\begin{itemize}
    \item Take the objects $x \in \mathcal{X}$ as points.
    \item For each morphism $f: x \to y$, attach a segment from point $x$ to point $y$.
    \item For each relation $f \circ g = h$, attach a triangle with edges labeled by $f$, $g$, and $h$.
    \item Continue this process for higher-dimensional cells $\ldots$
\end{itemize}
We will formalize this construction when we introduce simplicial sets.

\begin{exercise}
Show that the set of connected components $\pi_0(|\mathcal{X}|, x)$ corresponds bijectively to the isomorphism class of $x$ in $\mathcal{X}$. Furthermore, observe that $\mathrm{Hom}_{\mathcal{X}}(x, x)$ is a group, and prove that the fundamental group $\pi_1(|\mathcal{X}|, x) \cong \mathrm{Hom}_{\mathcal{X}}(x, x)$.
\end{exercise}

Conversely, for a topological space $S$, we can define the \textbf{fundamental groupoid} $\Pi_1(S)$, where:
\begin{itemize}
    \item Objects are points of $S$.
    \item Morphisms $\mathrm{Hom}_{\Pi_1(S)}(a, b)$ are homotopy classes of paths from $a$ to $b$.
\end{itemize}

\begin{exercise}
Describe the composition law in $\Pi_1(S)$ and verify that it satisfies the axioms of a groupoid.
\end{exercise}
\end{example}

The examples above illustrate that morphisms in a category can carry rich structure. On the other hand, if morphisms are trivial (i.e., at most one between any two objects), we obtain a partially ordered set:

\begin{example}[Poset]
Let $(P, \leq)$ be a partially ordered set. We can regard $P$ as a category as follows:
\begin{itemize}
    \item \textbf{Objects:} Elements of $P$.
    \item \textbf{Morphisms:} For $x, y \in P$, there exists a unique morphism $f: x \to y$ if and only if $x \leq y$.
    \item \textbf{Composition:} If $x \leq y$ and $y \leq z$, then $x \leq z$, so the morphism $x \to z$ is the composition of $x \to y$ and $y \to z$.
    \item \textbf{Identity:} For each $x \in P$, the identity morphism $\mathrm{id}_x: x \to x$ corresponds to the reflexivity $x \leq x$.
\end{itemize}

This category is called \emph{thin}, meaning there is at most one morphism between any two objects.

A frequently used example is the poset of open subsets of a topological space $S$, denoted $(\mathrm{Op}(S), \subseteq)$.
\end{example}

Note that a set $A$ can be viewed as a category in two distinct ways: either as a trivial groupoid or as a trivial poset. And a category can be viewed as a combination of this two case\footnote{It is useful to think category as an oriented graph}.
% https://q.uiver.app/#q=WzAsNCxbMSwyLCJTZXQiXSxbMCwxLCJHcm91cG9pZCJdLFsyLDEsIlBvc2V0Il0sWzEsMCwiQ2F0ZW9ncnkiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6ImJvdHRvbSJ9fX1dLFswLDIsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMiwzLCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6ImJvdHRvbSJ9fX1dXQ==
\[\begin{tikzcd}[ampersand replacement=\&,cramped]
\& \textbf{Category} \\
	\textbf{Groupoid} \&\& \textbf{Poset} \\
	\& \textbf{Set}
	\arrow[hook, from=2-1, to=1-2]
	\arrow[hook', from=2-3, to=1-2]
	\arrow[hook', from=3-2, to=2-1]
	\arrow[hook, from=3-2, to=2-3]
\end{tikzcd}\]

\begin{remark}
In the definition of a category, if we allow the morphism set $\mathrm{Hom}_{\mathcal{C}}(A, B)$ to carry additional structure—such as an Abelian group, vector space, groupoid, topological space, or even another category—we obtain an \textbf{enriched category}. In fact, it is often more natural to think of $\mathrm{Hom}_{\mathcal{C}}(A, B)$ as the set of connected components of a space:
\[
\mathrm{Hom}_{\mathcal{C}}(A, B) \cong \pi_0 \mathrm{Map}_{\mathcal{C}}(A, B).
\]

This reflects a general principle of the \textbf{Univalence Foundation}: mathematical structures should be treated as spaces (or types) from the outset, and the classical set-theoretic version can be recovered by taking the set of connected components. We will explore how to identify and work with these underlying geometric structures later in the course.
\end{remark} 

\section{Functor and Presheaf}
If we want to define map between to category, it is natural to ask respect the morphism:

\begin{definition}[Functor]
  Let $\mathcal{C}$ and $\mathcal{D}$ be categories. A \textbf{functor} $F: \mathcal{C} \to \mathcal{D}$ consists of:

\begin{itemize}
    \item A function that assigns to each object $A \in \mathcal{C}$ an object $F(A) \in \mathcal{D}$.
    \item A function that assigns to each morphism $f: A \to B$ in $\mathcal{C}$ a morphism $F(f): F(A) \to F(B)$ in $\mathcal{D}$.
\end{itemize}

Such that:
\begin{itemize}
    \item \textbf{Preservation of identities:} $F(\mathrm{id}_A) = \mathrm{id}_{F(A)}$
    \item \textbf{Preservation of composition:} For all $f: A \to B$ and $g: B \to C$ in $\mathcal{C}$,
    \[
    F(g \circ f) = F(g) \circ F(f)
    \]
\end{itemize}
\end{definition}
We denote the set (later will be category) of functor $\Fun(\mathcal{C} , \mathcal{D})$

\begin{example}
  For concrete categories, we can have the functor with respect their structures
 \begin{itemize}

    \item \textbf{Forgetful Functor:} 
    \[
    U: \mathbf{Grp} \to \mathbf{Set}
    \]
    assigns to each group its underlying set, and to each group homomorphism the same map viewed as a map of sets. Same for $\mathbf{Vect},\mathbf{Top}$, etc.
  \item \textbf{Free Functor:} 
    \[
    Free: \mathbf{Set} \to \mathbf{Grp}
    \]
    assigns to each set the free group it generates, and to each map of sets the free group homomorphism it generates.

    \begin{exercise}
      Verify $Free$ is indeed a functor, then show that \\ 
      $\Hom_{\mathbf{Grp}}(Free(A),G)\cong \Hom_{\mathbf{Set}}(A,U(G))$. Then how to define $Free$ for $\mathbf{Vect}$?
    \end{exercise}
  \item \textbf{Discrete Functor:}
    \[
    Disc: \mathbf{Set} \to \mathbf{Top}
    \]
    assigns to each set the discrete topological space, and to each map of sets the same map viewed as a continuous map.
  \item \textbf{Connected components:}
    \[
    \pi_0: \mathbf{Top} \to \mathbf{Set}
    \]
    assigns to each topological space its set of connected component.
    \begin{exercise}
     Show that $\Hom_{\mathbf{Top}}(Disc(A),S)\cong \Hom_{\mathbf{Set}}(A,U(S))$ and \\
     $\Hom_{\mathbf{Top}}(S, Disc(A))\cong \Hom_{\mathbf{Set}}(\pi_0S,A)$
    \end{exercise}
 \end{itemize} 

\end{example}

\begin{exercise}
 For groups (more general monoids) $G,H$, show that there is a bijection between functors $F:BG\to BH$ and group (monoid) homomorphism $f:G\to H$.    
\end{exercise}

\begin{exercise}
  \begin{enumerate}
    \item For groupoid $\cX,\cY$, show that a functor $F: \cX \to \cY$ induce a continuous map of geometric realization $|F|:|\cX| \to |\cY|$. Now let $\mathbf{Grpd}$ be  the category of groupoid, with functor as morphism, then show that geometric realization $|\cdot|: \mathbf{Grpd}\to \mathbf{Top}$ is actually a functor. 
    \item Similarly, show that $\Pi_1: \mathbf{Top}\to \mathbf{Grpd}$ is also a functor.
    \item* Moreover, show that $ \Hom_{\mathbf{Top}}(S, |\cX|)\cong \Hom_{\mathbf{Grpd}}(\Pi_1(S),\cX)$
  \end{enumerate}
   
\end{exercise}

\begin{exercise}
For posets $P,Q$, show that a functor $F:P\to Q$ is the same thing as an order preserving function.  
\end{exercise}

\begin{example}[Ring-Space Correspondence]
  Given a topological space $X$, assign to its ring of (real or complex) continuous function $C(X)$ seems to be a functor, but there is an issue: the map $p:X\to Y$ induce a pullback of function $p^*:C(Y)\to C(X), f \mapsto f(p(\cdot))$. For this reason, we introduce the notion of \textbf{Opposite Category} $\cC^{\op}$: it has the same objects as $\cC$, but reverse direction of all morphism, i.e. $ \Hom_{\cC^\op}(A,B)= \Hom_\cC(B,A)$. Then $C(\cdot):\mathbf{Top}^\op \to \mathbf{Ring}$ is a functor.
\end{example}
\begin{remark}
 The core of algebraic geometric is how to reverse this functor, to construct a space out of a commutative ring. That to say, to define a functor $\Spec :\mathbf{Ring}^\op \to \mathbf{Top}$, and we have
 \[
   \Hom_{\mathbf{Ring}}(R, C(X)) \cong \Hom_{\mathbf{Top}}( X,\Spec R)
 \]
 \begin{exercise}*
   Show that in this case the underlying set $$ U(\Spec R) = \Hom_{\Ring}(R, \bR \text{ or } \bC). $$ What topology should give to $\Spec R$ ?
 \end{exercise}
 But in reality we need to add some restriction in category to make this well-behaved:
\begin{itemize}
  \item between $C^*$-algbra and locally compact Hausdorff space, which is Gelfand representation theorem, and where the name $\Spec$ spectrum origin from;
  \item between commutative ring and locally ringed space, which is a fundamental theorem in algebraic geometry.
\end{itemize}
\end{remark}

Here is another important examples:

\begin{example}[Hom Functor]
  For a fixed object $A$ in a category $\mathcal{C}$, the functor
    \[
    h^A:=\mathrm{Hom}_{\mathcal{C}}(A, -): \mathcal{C} \to \mathbf{Set}
    \]
    assigns to each object $B$ the set of morphisms $\mathrm{Hom}_{\mathcal{C}}(A, B)$, and to each morphism $f: B \to C$ the function:
    \[
    h^A(f):=\mathrm{Hom}_{\mathcal{C}}(A, f): \mathrm{Hom}_{\mathcal{C}}(A, B) \to \mathrm{Hom}_{\mathcal{C}}(A, C), \quad g \mapsto f \circ g
    \]
    Similarly we can also define
    \[
    h_A:=\mathrm{Hom}_{\mathcal{C}}(-, A): \mathcal{C}^\op \to \mathbf{Set}
    \]
\end{example}
\begin{exercise}
 Show that $f$ is monomorphism iff $h^A(f)$ is injective for all $A$; $f$ is epimorphism iff $h_A(f)$ is injective for all $A$; $f$ is isomorphism iff both $h^A(f)$ and $h_A(f)$ are bijective for all $A$.
\end{exercise}
\begin{remark}
 We should think of objects of $\cC$ as some test objects, and a functor is like data of testing. For example, consider a sigma model of target space $M$, then let $\cC$ be category of space-time, for given space-time $\Sigma$, the collection of fields $ \Map(\Sigma, M)$ form such a functor. The question is: given such functor, can you recover "space" from it?
\end{remark}
  
Now we introduce the central conception for "generalized space" of the course

\begin{definition}[Presheaf]
  Let $\mathcal{C}$ be a category. A \textbf{presheaf} on $\mathcal{C}$ is a functor:
\[
F: \mathcal{C}^{\mathrm{op}} \to \mathbf{Set}
\]

That is, $F$ assigns:
\begin{itemize}
    \item To each object $U$ in $\mathcal{C}$, a set $F(U)$.
    \item To each morphism $f: V \to U$ in $\mathcal{C}$, a function:
    \[
    F(f): F(U) \to F(V)
    \]
\end{itemize}

such that:
\begin{itemize}
    \item $F(\mathrm{id}_U) = \mathrm{id}_{F(U)}$
    \item $F(g \circ f) = F(f) \circ F(g)$ for composable morphisms $f$ and $g$ in $\mathcal{C}$
\end{itemize}
\end{definition}
\begin{remark}
  
To understand why is notion of generalized space, let us compare to how do we define distribution as generalized function: 
\begin{itemize}
  \item We begin with some test function, Let $\mathcal{D}(\Omega)$ denotes the space of test functions, i.e., smooth functions with compact support in $\Omega$, notice that we have a pairing 
    $$ <-,->:\mathcal{D}(\Omega)\times \mathcal{D}(\Omega)\to \bR, (f,g) \mapsto \int_\Omega fg $$
    By which we can send a test function $f\in \mathcal{D}(\Omega)$ be a functional $ T_f :\mathcal{D}'(\Omega):=\mathcal{D}(\Omega)\to \bR, \phi \mapsto \int_\Omega f\phi $. Then the we define the \emph{distribution} as $ \mathcal{D}'(\Omega)$, which are generalized functions.
  \item Now we begin with category of test spaces $\cC$, we have the hom functor 
    \[
      \Hom_\cC(-,-):\cC^\op \times \cC \to \Set
    \]
    For each object $A\in \cC$ we can define presheaf $h_A: \cC^\op  \to \Set$, then we think presheaf as generalized spaces. Just like case of distribution, we have more presheaf than $h_A$.
\end{itemize}

\end{remark}
Now we give more concrete examples of presheaves
\begin{example}
  
\end{example}

Let $\PSh(\cC)=\Fun(\cC,\Set)$ be the collection of presheaf, as we indiced, this should be a category, let us found out what morphism they should have: Since $h_A,h_B$ is thought as generalized space, it should inherent the morphism in $\cC$. We can check that for $f:A\to B$, we have the map of set $ f\circ -: h_A(C)\to h_B(C)$ for each $C$. Nevertheless, those map should be compactable for the chose of $C$. This lead to our definition:
\begin{definition}
  
A \emph{morphism of presheaves} $\varphi : \mathcal{F} \to \mathcal{G}$ is a natural transformation between the functors $\mathcal{F}$ and $\mathcal{G}$; that is, for each object $U$ in $\mathcal{C}$, there is a function $\varphi_U : \mathcal{F}(U) \to \mathcal{G}(U)$ such that for every morphism $f : V \to U$ in $\mathcal{C}$, the following diagram commutes:
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzAsMSwiXFxidWxsZXQiXSxbMSwxLCJcXGJ1bGxldCJdLFswLDEsIlxcdmFycGhpX1UiXSxbMCwyLCJcXG1hdGhjYWx7Rn0oZikiLDJdLFsyLDMsIlxcdmFycGhpX1YiXSxbMSwzLCJcXG1hdGhjYWx7R30oZikiXV0=
\[\begin{tikzcd}[ampersand replacement=\&,cramped]
  \mathcal{F}(U) \&  \mathcal{G}(U) \\
\mathcal{F}(V)   \& \mathcal{G}(V)
	\arrow["{\varphi_U}", from=1-1, to=1-2]
	\arrow["{\mathcal{F}(f)}"', from=1-1, to=2-1]
	\arrow["{\mathcal{G}(f)}", from=1-2, to=2-2]
	\arrow["{\varphi_V}", from=2-1, to=2-2]
\end{tikzcd}\]

\end{definition}
\begin{exercise}
  Show that a morphism $f:A\to B$ induce a morphism of presheaf $Y(f):h_A\to h_B$. This means we have in fact a functor $ Y: \cC \to \PSh(\cC), A\mapsto h_A $. This is called \emph{Yoneda Embedding}.
\end{exercise}
\section{Yoneda Lemma}

\section{Universal Property and (Co)limit}
